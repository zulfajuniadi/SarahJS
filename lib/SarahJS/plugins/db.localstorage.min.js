require(["sarah"],function(a){var b=a.Utils,c=function(c,d){var e=this;e.name=c;var f=b.Store.get("PERSISTANCE:"+(d.name||c));void 0===f&&b.Store.set("PERSISTANCE:"+(d.name||c),[]),b.subscribe("LOAD:COLLECTION:"+c,function(){(b.Store.get("PERSISTANCE:"+(d.name||e.name))||[]).forEach(function(b){b.createdAt=new Date(b.createdAt),b.updatedAt=new Date(b.updatedAt),("1970-01-01T00:00:00.000Z"===b.deletedAt||null===b.deletedAt)&&(b.deletedAt=null,a.Collections[e.name].insert(b,!0))})}),e.sync=function(){b.Store.set("PERSISTANCE:"+(d.name||e.name),a.Collections[e.name].export())},b.subscribe("COLLECTION:INSERT:"+e.name,function(){e.sync()}),b.subscribe("COLLECTION:UPDATE:"+e.name,function(){e.sync()}),b.subscribe("COLLECTION:REMOVE:"+e.name,function(){e.sync()})};a.Runtime.Persistance.localstorage=c});